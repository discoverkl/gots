import{t as ie,d as j,r as H,c as M,o as A,a as m,b as re,e as y,f as x,g as v,n as P,u as l,h as T,w as ae,v as le,F as ce,i as ue,j as B,k as N,l as de,m as pe}from"./vendor.18e0a19c.js";const fe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}};fe();let b;try{b=ie.exports.getapi()}catch{b={loadText(s){return`text content of file: ${s}`},saveText(s,e){},listDir(s){switch(s){case"":return[{name:"dist",path:"dist",isDir:!0},{name:"src",path:"src",isDir:!0},{name:"package.json",path:"package.json"}];case"dist":return[{name:"js",path:"dist/js",isDir:!0},{name:"index.html",path:"dist/index.html"}];case"src":return[{name:"main.ts",path:"src/main.ts"},{name:"App.vue",path:"src/App.vue"}];case"dist/js":return[{name:"app.js",path:"dist/js/app.ts"}];default:return[]}}}}var F=b;var V=(c,s)=>{const e=c.__vccOpts||c;for(const[n,t]of s)e[n]=t;return e};const me={class:"item-content"},ve={class:"title"},he={key:0},_e=j({props:{item:Object,context:Object,root:Boolean},emits:["hook:open","tree:click","file:open"],setup(c,{emit:s}){const e=c,n=H({isOpen:!1,isDir:M(()=>e.item.isDir),version:0}),t=M(()=>e.context.notify);e.root===!0&&(e.context.emit=s),A(async function(){if(n.isDir){await e.context.ready;const f=m(!1);e.context.emit("hook:open",e.item.path,f),f.value===!0&&!n.isOpen&&h()}});async function r(f){e.item.isDir&&f.preventDefault(),e.context.emit("tree:click"),e.context.selectPath=e.item.path,await h(),e.item.isDir||e.context.emit("file:open",e.item.path)}async function h(){if(n.isDir){if(!n.isOpen){if(!F){t.value.error("Open Dir Failed","API is not ready");return}try{n.version++;const f=await F.listDir(e.item.path),k=[];for(const _ of f)_.name.length>0&&_.name[0]==="."||(_.parent=e.item,k.push(_));e.item.children=k}catch(f){e.item.children=null,t.value.error("Open Dir Failed",f)}}n.isOpen=!n.isOpen}}const E=M(()=>n.isDir?n.isOpen?"expand_more":"chevron_right":"description");return(f,k)=>{const _=re("TreeItem",!0);return y(),x("li",null,[v("div",{class:P({item:!0,active:c.context.selectPath===c.item.path}),onMousedown:r},[v("span",me,[v("span",{class:P([{icon:!0,show:!0,file:!l(n).isDir},"material-icons"])},T(l(E)),3),v("span",ve,T(c.item.name),1)])],34),l(n).isDir?ae((y(),x("ul",he,[(y(!0),x(ce,null,ue(c.item.children,(I,$)=>(y(),N(_,{class:"item",key:l(n).version.toString()+"-"+$,item:I,context:c.context},null,8,["item","context"]))),128))],512)),[[le,l(n).isOpen]]):B("",!0)])}}});var ye=V(_e,[["__scopeId","data-v-5e2060cc"]]);const ge={class:"page code-root"},xe={class:"tree"},ke={class:"file"},Oe={key:0,class:"editor-loading"},we=j({setup(c){const s=H({context:{selectPath:null,emit:()=>{},ready:null,notify:null}}),e=m(null),n=m(null);s.context.selectPath=n;const t=a=>(i,o)=>a(`${i}: ${o}`.toLowerCase()),r=m({info:t(console.info),success:t(console.info),error:t(console.error)});s.context.notify=r;const h=()=>{e.value.$el.focus()},{openHook:E}=Q(),{loadingMayShow:f,inputElement:k,editingPath:_,createEditorOnMounted:I,handleFileOpen:$,focusEditor:Ie,save:K,close:R}=J(r),{openRoot:q,root:z,ready:U,version:G}=W(n,R);s.context.ready=U;const{handleEditorInput:C}=X(K);A(function(){I(),q()});function J(a){const i=m(!1),o=m(""),u=m(""),O=m(null);let d=null,w=null,g=null;const S=async()=>{setTimeout(()=>{d===null&&(i.value=!0)},1e3),w=await window.getmonaco(),g=w.languages.getLanguages(),d=w.editor.create(O.value,{scrollBeyondLastLine:!1,automaticLayout:!0}),i.value=!1},Y=async p=>{u.value="",o.value="";try{o.value=await F.loadText(p),u.value=p,ne()}catch(D){a.value.error("Open File Failed",`${D}`);return}},Z=()=>d.focus(),ee=async()=>{if(u.value==""){a.value.error("Save File Failed","file path is empty");return}try{await F.saveText(u.value,o.value),a.value.success("File Saved",`${u.value}`)}catch(p){a.value.error("Save File Failed",`${p}`);return}},te=()=>{u.value="",o.value="",d!==null&&d.setValue("")},ne=()=>{if(d!==null){if(u.value===""){d.setValue("");return}const p=oe(u.value);d.setModel(w.editor.createModel(o.value,p)),d.getModel().onDidChangeContent(D=>{o.value=d.getValue()}),d.layout()}},oe=p=>{p=p.substr(p.lastIndexOf("/")+1);const D=p.lastIndexOf(".");if(D===-1)return"";const se=p.substr(D).toLowerCase();for(const L of g)if(L.extensions&&L.extensions.indexOf(se)!==-1)return L.id};return{loadingMayShow:i,inputElement:O,editingPath:u,notify:a,createEditorOnMounted:S,handleFileOpen:Y,focusEditor:Z,save:ee,close:te}}function Q(){return{openHook:(i,o)=>{if(!!F)switch(i&&(i[0]=="/"||i[1]=="\\")&&(i=i.substr(1)),i){case"":case"src":o.value=!0;break}}}}function W(a,i){const o=m(0),u=m({name:"",path:"",isDir:!0});let O=null;return{ready:new Promise((g,S)=>{O=g}),selectPath:a,root:u,version:o,openRoot:()=>{const g="My Files";a.value=null,i(),o.value++,u.value.name=g,u.value={name:g,path:"",isDir:!0},O()}}}function X(a){return{handleEditorInput:o=>{if(o.ctrlKey||o.metaKey){switch(o.code){case"KeyS":a();break;default:return}o.preventDefault()}}}}return(a,i)=>(y(),x("div",ge,[v("div",xe,[v("ul",null,[(y(),N(ye,{tabindex:"100",class:"root-item",ref_key:"treeElement",ref:e,key:l(G),item:l(z),context:l(s).context,root:!0,"onFile:open":l($),"onHook:open":l(E),"onTree:click":h},null,8,["item","context","onFile:open","onHook:open"]))])]),v("div",ke,[v("div",{class:"input",ref_key:"inputElement",ref:k,onKeydown:i[0]||(i[0]=(...o)=>l(C)&&l(C)(...o))},null,544),l(f)?(y(),x("div",Oe,"Loading editor ...")):B("",!0),v("div",{class:P(["editor-mask",{hide:l(_)}])},null,2)])]))}});var De=V(we,[["__scopeId","data-v-742341ca"]]);const Fe={id:"app",style:{width:"100%",height:"100%"}},Ee=j({setup(c){return(s,e)=>(y(),x("div",Fe,[de(De,{class:"code"})]))}});pe(Ee).mount("#app");
