(function(e){function t(t){for(var i,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";n("85ec")},"3d2f":function(e,t,n){"use strict";n("7150")},7150:function(e,t,n){},"85ec":function(e,t,n){},"98c6":function(e,t,n){},"9ab44":function(e,t,n){"use strict";n("98c6")},cd49:function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),r=n("39f8"),a=n("750b"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"app"}},[n("Code",{staticClass:"code"})],1)},s=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page code-root"},[n("div",{staticClass:"tree",on:{keydown:e.handleTreeInput}},[n("ul",[n("tree-item",{key:e.version,ref:"treeElement",staticClass:"root-item",attrs:{tabindex:"100",item:e.root,context:e.context,root:!0},on:{"file:open":e.handleFileOpen,"hook:open":e.openHook,"tree:click":e.focusTree}})],1)]),n("div",{staticClass:"file"},[n("div",{ref:"inputElement",staticClass:"input",on:{keydown:e.handleEditorInput}}),e.loadingMayShow?n("div",{staticClass:"editor-loading"},[e._v("Loading editor ...")]):e._e(),n("div",{staticClass:"editor-mask",class:{hide:e.editingPath}})])])},c=[],u=n("9ab4"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",{class:{item:!0,active:e.context.selectPath===e.item.path},on:{mousedown:e.itemClick}},[n("span",{staticClass:"item-content"},[n("VueIcon",{class:{icon:!0,show:!0,file:!e.isDir},attrs:{icon:e.iconOfItem}}),n("span",{staticClass:"title"},[e._v(e._s(e.item.name))])],1)]),e.isDir?n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}]},e._l(e.item.children,(function(t,i){return n("tree-item",{key:e.version.toString()+"-"+i,staticClass:"item",attrs:{item:t,context:e.context}})})),1):e._e()])},p=[],f=n("6668");const h=!0;let v;try{v=Object(f["getapi"])()}catch(T){h?v={loadText(e){return"text content of file: "+e},saveText(e,t){},listDir(e){switch(e){case"":return[{name:"dist",path:"dist",isDir:!0},{name:"src",path:"src",isDir:!0},{name:"package.json",path:"package.json"}];case"dist":return[{name:"js",path:"dist/js",isDir:!0},{name:"index.html",path:"dist/index.html"}];case"src":return[{name:"main.ts",path:"src/main.ts"},{name:"App.vue",path:"src/App.vue"}];case"dist/js":return[{name:"app.js",path:"dist/js/app.ts"}];default:return[]}}}:console.error("API is not ready: "+T)}var b=v,m={name:"tree-item",props:{item:Object,context:Object,root:Boolean},setup(e,{emit:t}){const n=Object(a["d"])({isOpen:!1,isDir:Object(a["a"])(()=>e.item.isDir),version:0}),r=Object(a["a"])(()=>e.context.notify);function o(t){return Object(u["a"])(this,void 0,void 0,(function*(){e.item.isDir&&t.preventDefault(),e.context.emit("tree:click"),e.context.selectPath=e.item.path,yield s(),e.item.isDir||e.context.emit("file:open",e.item.path)}))}function s(){return Object(u["a"])(this,void 0,void 0,(function*(){if(n.isDir){if(!n.isOpen){if(!b)return void r.value.error("Open Dir Failed","API is not ready");try{n.version++;const t=yield b.listDir(e.item.path),r=[];for(const n of t)n.name.length>0&&"."===n.name[0]||(n.parent=e.item,r.push(n));i["a"].set(e.item,"children",r)}catch(T){i["a"].set(e.item,"children",null),r.value.error("Open Dir Failed",T)}}n.isOpen=!n.isOpen}}))}!0===e.root&&(e.context.emit=t),Object(a["c"])((function(){return Object(u["a"])(this,void 0,void 0,(function*(){if(n.isDir){yield e.context.ready;const t=Object(a["e"])(!1);e.context.emit("hook:open",e.item.path,t),!0!==t.value||n.isOpen||s()}}))}));const l=Object(a["a"])(()=>n.isDir?n.isOpen?"keyboard_arrow_down":"keyboard_arrow_right":"insert_drive_file");return Object.assign(Object.assign({},Object(a["f"])(n)),{toggle:s,iconOfItem:l,itemClick:o})}},O=m,y=(n("9ab44"),n("2877")),g=Object(y["a"])(O,d,p,!1,null,"106e1747",null),j=g.exports,k={components:{"tree-item":j},setup(){const e=Object(a["d"])({context:{selectPath:null,emit:()=>{},ready:null,notify:null}}),t=Object(a["e"])(null),n=Object(a["e"])(null);e.context.selectPath=n;const i=e=>(t,n)=>e(`${t}: ${n}`.toLowerCase()),r=Object(a["e"])({info:i(console.info),success:i(console.info),error:i(console.error)});e.context.notify=r;const o=()=>{t.value.$el.focus()},{loadingMayShow:s,inputElement:l,editingPath:c,createEditorOnMounted:u,handleFileOpen:d,focusEditor:p,save:f,close:h}=x(r),{openRoot:v,root:b,ready:m,version:O}=D(n,h);e.context.ready=m;const{handleEditorInput:y,handleTreeInput:g}=_(b,f,n,t,d,p);return Object(a["c"])((function(){u(),v()})),Object.assign(Object.assign(Object.assign({},Object(a["f"])(e)),{treeElement:t,focusTree:o,root:b,version:O,handleFileOpen:d,inputElement:l,editingPath:c,loadingMayShow:s,handleEditorInput:y,handleTreeInput:g}),w())}};function x(e){const t=Object(a["e"])(!1),n=Object(a["e"])(""),i=Object(a["e"])(""),r=Object(a["e"])(null);let o=null,s=null,l=null;const c=()=>Object(u["a"])(this,void 0,void 0,(function*(){setTimeout(()=>{null===o&&(t.value=!0)},1e3),s=yield window.getmonaco(),l=s.languages.getLanguages(),o=s.editor.create(r.value,{scrollBeyondLastLine:!1}),t.value=!1})),d=t=>Object(u["a"])(this,void 0,void 0,(function*(){i.value="",n.value="";try{n.value=yield b.loadText(t),i.value=t,v()}catch(T){return void e.value.error("Open File Failed",""+T)}})),p=()=>o.focus(),f=()=>Object(u["a"])(this,void 0,void 0,(function*(){if(""!=i.value)try{yield b.saveText(i.value,n.value),e.value.success("File Saved",""+i.value)}catch(T){return void e.value.error("Save File Failed",""+T)}else e.value.error("Save File Failed","file path is empty")})),h=()=>{i.value="",n.value="",null!==o&&o.setValue("")},v=()=>{if(null!==o){if(""===i.value)return void o.setValue("");const e=m(i.value);o.setModel(s.editor.createModel(n.value,e)),o.getModel().onDidChangeContent(e=>{n.value=o.getValue()}),o.layout()}},m=e=>{e=e.substr(e.lastIndexOf("/")+1);const t=e.lastIndexOf(".");if(-1===t)return"";const n=e.substr(t).toLowerCase();for(const i of l)if(i.extensions&&-1!==i.extensions.indexOf(n))return i.id};return{loadingMayShow:t,inputElement:r,editingPath:i,notify:e,createEditorOnMounted:c,handleFileOpen:d,focusEditor:p,save:f,close:h}}function w(){const e=(e,t)=>{if(b)switch(!e||"/"!=e[0]&&"\\"!=e[1]||(e=e.substr(1)),e){case"":case"src":t.value=!0;break}};return{openHook:e}}function D(e,t){const n=Object(a["e"])(0),i=Object(a["e"])({name:"",path:"",isDir:!0});let r=null;const o=new Promise((e,t)=>{r=e}),s=()=>{const a="My Files";e.value=null,t(),n.value++,i.value.name=a,i.value={name:a,path:"",isDir:!0},r()};return{ready:o,selectPath:e,root:i,version:n,openRoot:s}}function _(e,t,n,i,r,a){const o=e=>{if(e.ctrlKey||e.metaKey){switch(e.keyCode){case 83:t();break;default:return}e.preventDefault()}},s=(e,t)=>{if(e){if(!0===t(e))return!0;if(e.$children)for(const n of e.$children)if(!0===s(n,t))return!0}},l=e=>{let t=null;return s(i.value,n=>{if(n.item.path==e)return t=n,!0}),t},c=e=>{if(n.value=e,null===e)return;let t=l(e);null!==t&&t.$el.scrollIntoViewIfNeeded()},u=e=>{const t=n.value;if(null===t)return;let i=l(t);if(null===i)return;let o=i.item;if(null===o)return;let s=!1;switch(e){case"up":if(o.parent){const e=o.parent.children,t=e.indexOf(o);if(t>0){o=e[t-1];while(o.isDir){if(i=l(o.path),null===i)return;if(!i.isOpen)break;if(!o.children||0==o.children.length)break;o=o.children[o.children.length-1]}c(o.path);break}c(o.parent.path);break}break;case"down":if(o.isDir&&i.isOpen&&o.children&&o.children.length>0){c(o.children[0].path);break}while(!s&&o.parent){const e=o.parent.children,t=e.indexOf(o);if(t<e.length-1){c(e[t+1].path),s=!0;break}o=o.parent}break;case"left":o.isDir&&i.isOpen?i.toggle():o.parent&&c(o.parent.path);break;case"right":o.isDir&&(i.isOpen?o.children&&o.children.length>0&&c(o.children[0].path):i.toggle());break;case"space":o.isDir?i.toggle():r(o.path);break;case"tab":a();break}},d=e=>{if(!e.ctrlKey&&!e.metaKey){switch(e.keyCode){case 37:u("left");break;case 38:u("up");break;case 39:u("right");break;case 40:u("down");break;case 32:u("space");break;case 9:if(e.shiftKey)return;u("tab");break;default:return}e.preventDefault()}};return{handleTreeInput:d,handleEditorInput:o}}var C=k,P=(n("3d2f"),Object(y["a"])(C,l,c,!1,null,"ea641a7a",null)),E=P.exports,I={name:"App",components:{Code:E}},F=I,M=(n("034f"),Object(y["a"])(F,o,s,!1,null,null,null)),S=M.exports;n("fe83");i["a"].use(r["a"]),i["a"].use(a["b"]),i["a"].config.productionTip=!1,new i["a"]({render:e=>e(S)}).$mount("#app")}});
//# sourceMappingURL=app.42ef8345.js.map